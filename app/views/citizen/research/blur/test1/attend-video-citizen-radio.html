{% extends "layout_unbranded.html" %}

{% block pageTitle %}
  Video appointment - Attend a video appointment
{% endblock %}

{% block header %}


{% include "includes/headers/header-attend.html" %}
<div class="portrait-no-display">

<div class="dwp-video-header-conduct">
  <div class="govuk-width-container" style="margin: 0, text-align: center;">
    <div class="btn-video-top">
    <div class="blur-background" style="font-size: 19px; float:left;">
      <label class="govuk-label" for="blur" style="margin-right:20px; margin-top: 10px; display:inline; float:left;">
        Blur background
      </label>

      <div class="govuk-radios govuk-radios--inline govuk-radios--small" style="margin-bottom: 5px; display:inline; float:right; text-align:left;" id="blur" name="blur">
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="blur-on" name="blur" type="radio" value="on" onclick="location.href='attend-video-blur-example.html';">
          <label class="govuk-label govuk-radios__label" for="blur-on">
            On
          </label>
        </div>
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="blur-off" name="blur" type="radio" value="no" style="display:inline;" checked>
          <label class="govuk-label govuk-radios__label" for="blur-off">
            Off
          </label>
        </div>
      </div>
    </div>
    <div class="btn-video-top--right">

        <button id="refresh" class="govuk-button govuk-button--secondary govuk-button--panel" style="margin: 0px 0px 15px 0px;" onClick="window.location.reload();">Refresh</button>

        </div>
    </div>
      </div>
</div>
</div>

<!-- Portrait -->
<div class="portrait-screen-only">
  <div class="top-buttons">
<div class="govuk-header__container govuk-header__container--full-width">
  <label class="govuk-label" for="blur" style="margin-right:20px; margin-top: 10px; display:inline; float:left;">
    Blur background
  </label>
      <div class="govuk-radios--small govuk-radios-header" style="display:inline; float:right;" id="blur" name="blur">

        <div class="govuk-radios__item" style="display:inline; position: relative;">
          <input class="govuk-radios__input" id="blur-on" name="blur" type="radio" value="yes" style="display:inline;" onclick="location.href='attend-video-blur-example.html';">
          <label class="govuk-label govuk-radios__label" for="blur-on">
            On
          </label>
        </div>
        <div class="govuk-radios__item" style="display:inline; position: absolute;">
          <input class="govuk-radios__input" id="blur-off" name="blur" type="radio" value="no" checked>
          <label class="govuk-label govuk-radios__label" for="blur-off">
            Off
          </label>
          </div>
        </div>
      </div>
      </div>

  <main style="margin:0; padding:0;">
  <div class="flex-container">
    <div class="flex-item flex-responsive-container" style="height: calc(100vh - 250px);">
      <div class="selfie-single">
        <img class="video-participant" style="object-fit:cover;  width: 100%;" src="/public/images/workcoach9.png">
        </div>
        <div class="selfie-multiple-small">
            <video autoplay="true" id="videoElement" style="object-fit:cover; background-color:#0b0c0c;"></video>
        </div>

  </div>
  <div class="bottom-buttons">
      <button class="govuk-button govuk-button--secondary govuk-button--panel" style="margin:0px 5px 0px 5px;">Refresh</button>
  </div>

  </div>
  </main>
  </div>

  <!-- Medium -->
  <div class="medium-screen-only">
    <main style="margin:0; padding:0;">
    <div class="flex-container">
      <div class="flex-item flex-responsive-container" style="height: calc(100% - 200px); background-color: #0b0c0c;">
        <div class="landscape-main">
          <img class="video-participant" style="object-fit:cover;  width: 100%;"  src="/public/images/workcoach9.png">
        </div>
        <div class="landscape-medium" style="background-color: #0b0c0c;">
            <video autoplay="true" id="videoMedium" style="object-fit:cover;"></video>
        </div>
    </div>
    </div>
    </main>
    </div>

{% endblock %}

{% block content %}

<!-- Desktop -->

<div class="desktop-screen-only">
      <div class="video-frame-attendee">
        <div class="attendee-main">
        <img class="video-participant-cov" width="100%" src="/public/images/workcoach9.png">
      </div>
        <div class="selfie-multiple-small">
            <video autoplay="true" id="videoDesktop" style="object-fit:cover;background-color:#0b0c0c"></video>
        </div>
  </div>
  </div>
  <div class="govuk-width-container"> <a class="govuk-link" style="float:left" href="attend-video-blur-example">Back</a> <a class="govuk-link" style="float:right" href="attend-video-replace-example">Next</a></div>


 <script>
      // Grab elements, create settings, etc.
      var video = document.getElementById('videoElement');
      var desktopVideo = document.getElementById('videoDesktop');
        var selfieVideo = document.getElementById('videoMedium');

      // Get access to the camera!
      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
          // Not adding `{ audio: true }` since we only want video now
          navigator
              .mediaDevices
              .getUserMedia({video: true})
              .then(function (stream) {
                  //video.src = window.URL.createObjectURL(stream);
                  video.srcObject = stream;
                  video.play();

                  selfieVideo.srcObject = stream;
                  selfieVideo.play();

                  desktopVideo.srcObject = stream;
                  desktopVideo.play();
              });
      }
  </script>

  <script>
          /* When the user clicks on the button,
          toggle between hiding and showing the dropdown content */
          function myFunction() {
            document.getElementById("myDropdown").classList.toggle("show");
          }

          // Close the dropdown menu if the user clicks outside of it
          window.onclick = function(event) {
            if (!event.target.matches('.dropbtn')) {
              var dropdowns = document.getElementsByClassName("dropdown-content");
              var i;
              for (i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                  openDropdown.classList.remove('show');
                }
              }
            }
          }

          </script>

{% endblock %}

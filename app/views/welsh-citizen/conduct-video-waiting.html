{% extends "layout_unbranded.html" %}

{% block pageTitle %}
    You've joined the video appointment - Attend a video appointment
{% endblock %}

{% block header %}

{% include "includes/header-conduct.html" %}
<div class="dwp-video-header">
  <div class="govuk-width-container govuk-header__contents" style="margin: 0, text-align: center; max-width: 1280px">
    </div>
  </div>
{% endblock %}

{% block content %}

    <div class="flex-container">

        <div class="flex-item flex-responsive-container">

          <div class="govuk-video-frame">
            <a href="start-citizen-permissions">
              <div class="govuk-video-inside-frame">
              <div class="govuk-grid-column-two-thirds" style="display: inline-block; text-align: left;">
                <h1 class="govuk-heading-xl">
                  The appointment has not started yet
                </h1>

                <h2 class="govuk-heading-m">
                  Please wait for the other person to join.
                  </h2>

                <!--<div class="govuk-inset-text">Please do not leave without talking to a member of staff. You may be paid less in your benefits if you miss an appointment.
                </div>-->
              </div>

            <div class="flex-selfie-container">
                <video id="selfie-video" autoplay="" style="object-fit: cover;"></video>
            </div>

        </div>



    <script>
        // Grab elements, create settings, etc.

        var selfieVideo = document.getElementById('selfie-video');

        // Get access to the camera!
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            // Not adding `{ audio: true }` since we only want video now
            navigator
                .mediaDevices
                .getUserMedia({video: true})
                .then(function (stream) {
                    //video.src = window.URL.createObjectURL(stream);


                    selfieVideo.srcObject = stream;
                    selfieVideo.play();
                });
        }
    </script>

    <script>

        function configureViewportHeight() {
            const vh = window.innerHeight * 0.01; // Get inner height of the window and multiply it by 1% to get one unit of vh.
            document.documentElement.style.setProperty('--vh', `${vh}px`); // Set the value in the "--vh" custom property to the root of the document
        }

        configureViewportHeight(); // Configure the custome viewport property.
        window.addEventListener('resize', configureViewportHeight); // Listen to resize event and fire the above function.

    </script>

{% endblock %}

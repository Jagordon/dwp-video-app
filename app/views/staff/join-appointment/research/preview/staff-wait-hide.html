{% extends "layout_unbranded.html" %}

{% block pageTitle %}
  Video appointment - Conduct a video appointment
{% endblock %}

{% block header %}
{% include "includes/header-staff-vid-responsive.html" %}
<div id="header-area" class="dwp-video-header-background govuk-!-padding-top-3">

  <div class="govuk-width-container custom-header-width--conduct" style="margin: 0, text-align: center;">




    <div class="btn-video-top">


    <div class="background-banner">
      <div class="govuk-form-group" style="margin-bottom:0px;">
        <fieldset class="govuk-fieldset" aria-describedby="hide-my-background">
          <label class="govuk-label" for="blur" style="margin-right:20px; margin-top: 10px; display:inline; float:left;">
          Hide my background
          </label>
          <div class="govuk-radios govuk-radios--inline govuk-radios--small govuk-radios-respond">
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="background-1" name="background" type="radio" value="on" checked>
              <label class="govuk-label govuk-radios__label" for="background-1">
                On
              </label>
            </div>
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="background-2" name="background" type="radio" value="off"  onclick="location.href='staff-wait-2.html';">
              <label class="govuk-label govuk-radios__label" for="background-2">
                Off
              </label>
            </div>
          </div>

        </fieldset>
      </div>
     </div>

    <div class="btn-video-top--right">

        <button id="refresh" class="govuk-button govuk-button--secondary govuk-button--panel govuk-button-respond" style="margin: 0px 20px 0px 0px;" onClick="window.location.reload();">Refresh</button>
        <button class= "govuk-button govuk-button--warning govuk-button-respond" style="margin-bottom: 15px;" onclick="document.getElementById('id01').style.display='block'">End</button> </div>

    <dialog id="id01" class="modal" aria-labelledby="end-appointment" aria-describedby="end-confirmation" aria-modal="true" role="dialog" tabindex="-1" open>
      <form class="modal-content">
        <div class="govuk-modal-dialog-header">

          <button type="button" onclick="document.getElementById('id01').style.display='none'" class="govuk-button modal-close" title="Cancel">Ã—</button></div>
        <div class="modal-container">
          <h1>End the video appointment?</h1>
          <p> You will not be able to rejoin and the session will be closed.</p>

          <div class="clearfix">
              <a href="#" role="button" class="govuk-button govuk-button--warning govuk-!-margin-right-2 govuk-button-respond" data-module="govuk-button" style="margin-bottom: 0">End appointment </a>
              <button onClick="document.getElementById('id01').style.display='none'" class="govuk-button govuk-button--secondary govuk-button-respond" data-module="govuk-button" style="margin-bottom: 0px;">Cancel</button>

          </div>
        </div>
      </form>
    </dialog>

        </div>


  </div>
</div>

{% endblock %}

{% block content %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-three-quarters">
        <div class="waiting-frame">
          <div class="attendee-main">
            <div class="govuk-grid-row govuk-!-margin-top-7 govuk-!-margin-left-7 govuk-!-margin-bottom-7">
              <div class="govuk-grid-column-two-thirds">
            <h2 class="govuk-heading-xl waiting-header">You have joined the video appointment</h2>
            <p class="govuk-body">Please wait for an attendee to join.</p>
          <p class="govuk-body">  You do not need  to do anything; the appointment will start automatically.</p>
        </div> </div> </div>
        <div class="selfie-multiple-small" style="border: solid 1px #0b0c0c;">
<img class="video-participant-cov" style="width:100%" src="/public/images/white-background.png">
</div>
</div>
 </div>
      <div class="govuk-grid-column-one-quarter">
        <h2 class="govuk-heading-s">Participants</h2>
        <dl class="govuk-summary-list" style="font-size:16px">
          <div class="govuk-summary-list__row">
            <dd class="govuk-summary-list__value">
              Host (me)
            </dd>
            <dd class="govuk-summary-list__actions">
              <a class="govuk-link" href="#">
                   <span class="govuk-visually-hidden"> No action available</span>
                 </a>
            </dd>
          </div>
          </div>



                <script src="/public/javascripts/jquery-1.11.3.js"></script>

                <script>
                // add all the elements inside modal which you want to make focusable
              const  focusableElements =
                  'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
              const modal = document.querySelector('#id01'); // select the modal by it's id
              const firstFocusableElement = modal.querySelectorAll(focusableElements)[0]; // get first element to be focused inside modal
              const focusableContent = modal.querySelectorAll(focusableElements);
              const lastFocusableElement = focusableContent[focusableContent.length - 1]; // get last element to be focused inside modal
              document.addEventListener('keydown', function(e) {
                let isTabPressed = e.key === 'Tab' || e.keyCode === 9;
                if (!isTabPressed) {
                  return;
                }
                if (e.shiftKey) { // if shift key pressed for shift + tab combination
                  if (document.activeElement === firstFocusableElement) {
                    lastFocusableElement.focus(); // add focus for the last focusable element
                    e.preventDefault();
                  }
                } else { // if tab key is pressed
                  if (document.activeElement === lastFocusableElement) { // if focused has reached to last focusable element then focus first focusable element after pressing tab
                    firstFocusableElement.focus(); // add focus for the first focusable element
                    e.preventDefault();
                  }
                }
              });
              firstFocusableElement.focus();
              </script>

              <script>
                $(document).keydown(function(event) {
                  if (event.keyCode == 27) {
                    $('#id01').hide();
                  }
                });
              </script>

{% endblock %}
